!function(n,s){"use strict";var i=s.Modernizr,e=n("body");n.DLMenu=function(s,i){this.$el=n(i),this._init(s)},n.DLMenu.defaults={animationClasses:{classin:"rex-animate-in-1",classout:"rex-animate-out-1"},onLevelClick:function(){return!1},onLinkClick:function(){return!1}},n.DLMenu.prototype={_init:function(s){this.options=n.extend(!0,{},n.DLMenu.defaults,s),this._config();var e={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.animEndEventName=e[i.prefixed("animation")]+".asmenu",this.transEndEventName=t[i.prefixed("transition")]+".asmenu",this.supportAnimations=i.cssanimations,this.supportTransitions=i.csstransitions,this._initEvents()},_config:function(){this.open=!1,this.$trigger=this.$el.children(".rex-trigger"),this.$menu=this.$el.children("ul.rex-menu"),this.$menuitems=this.$menu.find("li:not(.rex-back)"),this.$el.find("ul.rex-submenu").prepend('<li class="rex-back"><a href="#">back</a></li>'),this.$back=this.$menu.find("li.rex-back")},_initEvents:function(){var s=this;this.$trigger.on("click.asmenu",function(){return s.open?s._closeMenu():s._openMenu(),!1}),this.$menuitems.on("click.asmenu",function(i){i.stopPropagation();var e=n(this),t=e.children("ul.rex-submenu");if(t.length>0){var a=t.clone().css("opacity",0).insertAfter(s.$menu),o=function(){s.$menu.off(s.animEndEventName).removeClass(s.options.animationClasses.classout).addClass("rex-subview"),e.addClass("rex-subviewopen").parents(".rex-subviewopen:first").removeClass("rex-subviewopen").addClass("rex-subview"),a.remove()};return setTimeout(function(){a.addClass(s.options.animationClasses.classin),s.$menu.addClass(s.options.animationClasses.classout),s.supportAnimations?s.$menu.on(s.animEndEventName,o):o.call(),s.options.onLevelClick(e,e.children("a:first").text())}),!1}s.options.onLinkClick(e,i)}),this.$back.on("click.asmenu",function(){var i=n(this),e=i.parents("ul.rex-submenu:first"),t=e.parent(),a=e.clone().insertAfter(s.$menu),o=function(){s.$menu.off(s.animEndEventName).removeClass(s.options.animationClasses.classin),a.remove()};return setTimeout(function(){a.addClass(s.options.animationClasses.classout),s.$menu.addClass(s.options.animationClasses.classin),s.supportAnimations?s.$menu.on(s.animEndEventName,o):o.call(),t.removeClass("rex-subviewopen");var n=i.parents(".rex-subview:first");n.is("li")&&n.addClass("rex-subviewopen"),n.removeClass("rex-subview")}),!1})},closeMenu:function(){this.open&&this._closeMenu()},_closeMenu:function(){var n=this,s=function(){n.$menu.off(n.transEndEventName),n._resetMenu()};this.$menu.removeClass("rex-menuopen"),this.$menu.addClass("rex-menu-toggle"),this.$trigger.removeClass("rex-active"),this.supportTransitions?this.$menu.on(this.transEndEventName,s):s.call(),this.open=!1},openMenu:function(){this.open||this._openMenu()},_openMenu:function(){var s=this;e.off("click").on("click.asmenu",function(){s._closeMenu()}),this.$menu.addClass("rex-menuopen rex-menu-toggle").on(this.transEndEventName,function(){n(this).removeClass("rex-menu-toggle")}),this.$trigger.addClass("rex-active"),this.open=!0},_resetMenu:function(){this.$menu.removeClass("rex-subview"),this.$menuitems.removeClass("rex-subview rex-subviewopen")}};var t=function(n){s.console&&s.console.error(n)};n.fn.asmenu=function(s){if("string"==typeof s){var i=Array.prototype.slice.call(arguments,1);this.each(function(){var e=n.data(this,"asmenu");return e?n.isFunction(e[s])&&"_"!==s.charAt(0)?void e[s].apply(e,i):void t("no such method '"+s+"' for asmenu instance"):void t("cannot call methods on asmenu prior to initialization; attempted to call method '"+s+"'")})}else this.each(function(){var i=n.data(this,"asmenu");i?i._init():i=n.data(this,"asmenu",new n.DLMenu(s,this))});return this}}(jQuery,window);